# ================================
# Docker Compose per Expo + Supabase
# Modalit√† tunnel (ngrok)
# ================================

services:
  expo:
    build: .
    container_name: expo
    working_dir: /usr/src/app

    # Espone le porte usate da Expo e Metro
    ports:
      - "19000:19000"  # Metro Bundler exp://
      - "19001:19001"  # WebSocket debugger
      - "19002:19002"  # DevTools UI
      - "8081-8090:8081-8090"  # Intervallo porte Metro alternative

    # Monta il codice locale nel container (hot reload)
    volumes:
      - ./app:/usr/src/app
      - /usr/src/app/node_modules

    # Variabili d'ambiente
    environment:
      - EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0
      - EXPO_USE_DEV_SERVER=true

    stdin_open: true
    tty: true
